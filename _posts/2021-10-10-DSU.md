---
title:  Disjoint Sets Union
tags:
  - cp
  - dsu
  - path-compression
---

<!--more-->

## dsu cơ bản

```cpp
vector<int> link(MAX + 1);
vector<int> sz(MAX + 1, 1);
int find(int a){
    while(a != link[a]) a = link[a];
    return a;
}
void unite(int a, int b){
    a = find(a);
    b = find(b);
    if(a == b) return ;
    if(sz[a] < sz[b]) swap(a, b);
    sz[a] += sz[b];
    sz[b] = 0;
    link[b] = a;
}
```
## dsu path-compression

```cpp
int find(int a){
    if(link[a] != a) return link[a] = find(link[a]);
    return a;
}
```
## Bài tập vận dụng
[A - People are leaving](https://codeforces.com/edu/course/2/lesson/7/2/practice/contest/289391/problem/A)

*Lưu ý: Nếu không dùng dsu path-compression sẽ bị TLE bài này*

[J - Robot Factory](https://codeforces.com/contest/1600/problem/J)

**Tóm Tắt đề:** cho ma trận n x m. Mỗi ô có thể dựng bức tường ở 4 hướng trên, phải, dưới trái. Xuất ra tất cả các căn phòng sau cùng.

*Lỗi sai từng mắc phải: hàm unite của dsu thiếu dòng code `if(a == b) return ;`*
